<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Usuarios</h2>
        <button (click)="openDialog()"  pButton type="button" label="Nuevo Usuario" icon="pi pi-plus" class="btn btn-primary"></button>
    </div>

    <div class="table-responsive">
        <p-table [value]="usuarios" class="table table-striped table-hover">
            <ng-template pTemplate="header">
                <tr>
                    <th>Nombres</th>
                    <th>Apodo</th>
                    <th class="text-center">Contraseña</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-user>
                <tr [@fadeInOut]>
                    <td>{{user.nombre}}</td>
                    <td>{{user.usuario}}</td>
                    <td class="text-center">
                        <button (click)="openDialog(user)" pButton type="button" icon="pi pi-pencil" class="btn btn-sm btn-warning me-2" label="Editar"></button>
                        <button (click)="deleteUser(user.idUsuario)" pButton type="button" icon="pi pi-trash" class="btn btn-sm btn-danger" label="Eliminar"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<p-dialog header="Usuarios" [(visible)]="displayDialog" [modal]="true" 
[closable]="true" [style]="{width: '400px'}">

<form [formGroup]="usuarioForm">
    <div class="mb-3">
        <label for="nombre" class="form-label">Nombres</label>
        <input id="nombre" pInputText formControlName="names" class="form-control">
    </div>
    <div class="mb-3">
        <label for="usuario" class="form-label">Usuario</label>
        <input id="usuario" pInputText formControlName="userName" class="form-control">
    </div>
    <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <input id="password" pInputText formControlName="password" class="form-control">
    </div>
    <div class="d-flex justify-content-end">
        <button (click)="displayDialog=false" pButton type="button" label="Cancelar" class="btn btn-secondary me-2"></button>
        <button pButton type="submit" label="Guardar" [disabled]="!usuarioForm.valid" class="btn btn-primary"></button>
    </div>
</form>

</p-dialog>
